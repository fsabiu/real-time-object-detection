Starting test with recorded stream...

Step 1: Starting FFmpeg stream (Terminal 1)
This will stream cala_del_moral.ts to rtsp://localhost:8554/klvstream

FFmpeg started (PID: 4170266)
Waiting 5 seconds for stream to stabilize...
ffmpeg version 7.1.1 Copyright (c) 2000-2025 the FFmpeg developers
  built with gcc 14.3.0 (conda-forge gcc 14.3.0-5)
  configuration: --prefix=/home/ubuntu/miniforge/envs/drone_detector --cc=/home/conda/feedstock_root/build_artifacts/ffmpeg_1757214059462/_build_env/bin/x86_64-conda-linux-gnu-cc --cxx=/home/conda/feedstock_root/build_artifacts/ffmpeg_1757214059462/_build_env/bin/x86_64-conda-linux-gnu-c++ --nm=/home/conda/feedstock_root/build_artifacts/ffmpeg_1757214059462/_build_env/bin/x86_64-conda-linux-gnu-nm --ar=/home/conda/feedstock_root/build_artifacts/ffmpeg_1757214059462/_build_env/bin/x86_64-conda-linux-gnu-ar --disable-doc --enable-openssl --enable-demuxer=dash --enable-hardcoded-tables --enable-libfreetype --enable-libharfbuzz --enable-libfontconfig --enable-libopenh264 --enable-libdav1d --disable-gnutls --enable-libvpx --enable-libass --enable-pthreads --enable-alsa --enable-libpulse --enable-vaapi --enable-libvpl --enable-libopenvino --enable-gpl --enable-libx264 --enable-libx265 --enable-libmp3lame --enable-libaom --enable-libsvtav1 --enable-libxml2 --enable-pic --enable-shared --disable-static --enable-version3 --enable-zlib --enable-libvorbis --enable-libopus --enable-librsvg --enable-ffplay --pkg-config=/home/conda/feedstock_root/build_artifacts/ffmpeg_1757214059462/_build_env/bin/pkg-config
  libavutil      59. 39.100 / 59. 39.100
  libavcodec     61. 19.101 / 61. 19.101
  libavformat    61.  7.100 / 61.  7.100
  libavdevice    61.  3.100 / 61.  3.100
  libavfilter    10.  4.100 / 10.  4.100
  libswscale      8.  3.100 /  8.  3.100
  libswresample   5.  3.100 /  5.  3.100
  libpostproc    58.  3.100 / 58.  3.100
[mpegts @ 0x6021be68fb00] start time for stream 1 is not set in estimate_timings_from_pts
Input #0, mpegts, from '/home/ubuntu/drones/cala_del_moral.ts':
  Duration: 00:09:37.49, start: 1.633456, bitrate: 4482 kb/s
  Program 1 
    Metadata:
      service_name    : Service01
      service_provider: FFmpeg
  Stream #0:0[0x100]: Video: h264 (Main) ([27][0][0][0] / 0x001B), yuv420p(tv, bt709, progressive), 1280x720 [SAR 1:1 DAR 16:9], 29.97 fps, 29.97 tbr, 90k tbn
  Stream #0:1[0x101]: Data: klv (KLVA / 0x41564C4B)
Stream mapping:
  Stream #0:0 -> #0:0 (copy)
Output #0, rtsp, to 'rtsp://localhost:8554/klvstream':
  Metadata:
    encoder         : Lavf61.7.100
  Stream #0:0: Video: h264 (Main) ([27][0][0][0] / 0x001B), yuv420p(tv, bt709, progressive), 1280x720 [SAR 1:1 DAR 16:9], q=2-31, 29.97 fps, 29.97 tbr, 90k tbn
Press [q] to stop, [?] for help
frame=   30 fps=0.0 q=-1.0 size=N/A time=00:00:01.00 bitrate=N/A speed=   2x    frame=   45 fps= 45 q=-1.0 size=N/A time=00:00:01.50 bitrate=N/A speed= 1.5x    frame=   60 fps= 40 q=-1.0 size=N/A time=00:00:02.00 bitrate=N/A speed=1.33x    frame=   75 fps= 37 q=-1.0 size=N/A time=00:00:02.50 bitrate=N/A speed=1.25x    frame=   90 fps= 36 q=-1.0 size=N/A time=00:00:03.00 bitrate=N/A speed= 1.2x    frame=  105 fps= 35 q=-1.0 size=N/A time=00:00:03.50 bitrate=N/A speed=1.17x    frame=  120 fps= 34 q=-1.0 size=N/A time=00:00:04.00 bitrate=N/A speed=1.14x    frame=  135 fps= 34 q=-1.0 size=N/A time=00:00:04.50 bitrate=N/A speed=1.13x    frame=  150 fps= 33 q=-1.0 size=N/A time=00:00:05.00 bitrate=N/A speed=1.11x    
Step 2: Starting detector (Terminal 2)
This will run the detector on the stream

frame=  165 fps= 33 q=-1.0 size=N/A time=00:00:05.50 bitrate=N/A speed= 1.1x    frame=  180 fps= 33 q=-1.0 size=N/A time=00:00:06.00 bitrate=N/A speed=1.09x    frame=  195 fps= 32 q=-1.0 size=N/A time=00:00:06.50 bitrate=N/A speed=1.08x    2025-12-03 21:38:52,373 - INFO - Loading YOLO model: yolov8n.pt
2025-12-03 21:38:52,409 - INFO - Opening SRT stream: rtsp://localhost:8554/klvstream
frame=  210 fps= 32 q=-1.0 size=N/A time=00:00:07.00 bitrate=N/A speed=1.08x    frame=  225 fps= 32 q=-1.0 size=N/A time=00:00:07.50 bitrate=N/A speed=1.07x    frame=  240 fps= 32 q=-1.0 size=N/A time=00:00:08.00 bitrate=N/A speed=1.07x    frame=  255 fps= 32 q=-1.0 size=N/A time=00:00:08.50 bitrate=N/A speed=1.06x    2025-12-03 21:38:54,691 - INFO - Starting capture thread
2025-12-03 21:38:54,691 - INFO - Initializing writer: 1280x720 @ 29.97002997002997fps
frame=  270 fps= 32 q=-1.0 size=N/A time=00:00:09.00 bitrate=N/A speed=1.06x    frame=  285 fps= 32 q=-1.0 size=N/A time=00:00:09.50 bitrate=N/A speed=1.06x    2025-12-03 21:38:55,409 - INFO - Creating direct GStreamer pipeline (Basic mode with native bindings)...
2025-12-03 21:38:55,417 - ERROR - Capture thread error: 'NoneType' object has no attribute 'set_property'
frame=  300 fps= 32 q=-1.0 size=N/A time=00:00:10.00 bitrate=N/A speed=1.05x    frame=  315 fps= 31 q=-1.0 size=N/A time=00:00:10.50 bitrate=N/A speed=1.05x    2025-12-03 21:38:56,693 - INFO - Starting inference thread
2025-12-03 21:38:56,694 - INFO - Starting output thread
frame=  330 fps= 31 q=-1.0 size=N/A time=00:00:11.01 bitrate=N/A speed=1.05x    
Stopping FFmpeg...
[out#0/rtsp @ 0x6021be7a1100] video:6432KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: unknown
frame=  345 fps= 31 q=-1.0 Lsize=N/A time=00:00:11.51 bitrate=N/A speed=1.05x    
Exiting normally, received signal 15.
